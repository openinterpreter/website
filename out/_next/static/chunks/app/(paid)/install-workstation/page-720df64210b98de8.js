(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[84],{6635:(e,t,n)=>{Promise.resolve().then(n.bind(n,826))},826:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>d});var r=n(5155),l=n(2115),a=n(9757),i=n(5032),s=n(6225);let o={appleSilicon:"https://neyguovvcjxfzhqpkicj.supabase.co/storage/v1/object/public/workstationupdater/releases/Interpreter-Workstation-arm64.dmg",intel:"https://neyguovvcjxfzhqpkicj.supabase.co/storage/v1/object/public/workstationupdater/releases/Interpreter-Workstation-x64.dmg",windows:"https://neyguovvcjxfzhqpkicj.supabase.co/storage/v1/object/public/workstationupdater/releases/Interpreter-Workstation-x64.exe"};function c(){let e=(0,l.useRef)(null),[t,n]=(0,l.useState)({w:160,h:34}),[a,i]=(0,l.useState)({cols:0,rows:0}),[s,o]=(0,l.useState)([]),c=(0,l.useRef)({dragging:!1,anchor:null,activeIndex:null,addMode:!1}),d=(0,l.useRef)(s);(0,l.useEffect)(()=>{d.current=s},[s]);let u=(e,t)=>({c0:Math.min(e.c0,t.c0),r0:Math.min(e.r0,t.r0),c1:Math.max(e.c1,t.c1),r1:Math.max(e.r1,t.r1)}),m=(e,t)=>{let n=!(t.c0>e.c1+1||t.c1<e.c0-1),r=!(t.r0>e.r1+1||t.r1<e.r0-1);return n&&r};(0,l.useEffect)(()=>{let t=e.current;if(!t)return;let r=()=>{let e=t.closest(".workstation-left-grid"),n=e?getComputedStyle(e):getComputedStyle(document.documentElement);return{w:parseFloat(n.getPropertyValue("--cell-w"))||160,h:parseFloat(n.getPropertyValue("--cell-h"))||34}},l=e=>{let n=t.querySelectorAll(".ws-cell");for(let t=0;t<n.length;t++){let r=n[t],l=Math.floor(t/e),a=t%e;r.dataset.row=String(l),r.dataset.col=String(a)}},a=()=>{let{w:e,h:a}=r();n({w:e,h:a});let s=t.parentElement;if(!s)return;let o=s.getBoundingClientRect(),c=Math.ceil(o.width/e)+2,d=Math.ceil(o.height/a)+2;t.style.gridTemplateColumns="repeat(".concat(c,", ").concat(e,"px)"),t.style.gridAutoRows="".concat(a,"px");let u=c*d,m=t.querySelectorAll(".ws-cell").length;if(m<u){let e=document.createDocumentFragment();for(let t=m;t<u;t++){let t=document.createElement("div");t.className="ws-cell",t.tabIndex=-1,e.appendChild(t)}t.appendChild(e)}else if(m>u)for(let e=m-1;e>=u;e--)t.removeChild(t.querySelectorAll(".ws-cell")[e]);l(c),i({cols:c,rows:d})},s=t.parentElement,p=new ResizeObserver(a);s&&p.observe(s),a();let h=()=>a();window.addEventListener("orientationchange",h);let w=(e,t)=>{let n=document.elementFromPoint(e,t),r=n&&n.closest(".ws-cell");if(!r)return null;let l=parseInt(r.dataset.col||"-1",10),a=parseInt(r.dataset.row||"-1",10);return l<0||a<0?null:{c:l,r:a}},g=(e,t)=>{let n=Math.min(e.c,t.c);return{c0:n,r0:Math.min(e.r,t.r),c1:Math.max(e.c,t.c),r1:Math.max(e.r,t.r)}},f=e=>{let t=[...e],n=!0;for(;n;){n=!1;e:for(let e=0;e<t.length;e++)for(let r=e+1;r<t.length;r++){let l=t[e],a=t[r];if(!(a.c0>l.c1||a.c1<l.c0||a.r0>l.r1||a.r1<l.r0)){let i={c0:Math.min(l.c0,a.c0),r0:Math.min(l.r0,a.r0),c1:Math.max(l.c1,a.c1),r1:Math.max(l.r1,a.r1)};t.splice(r,1),t[e]=i,n=!0;break e}}}return t},x=e=>{let t=e.shiftKey||e.metaKey||e.ctrlKey,n=w(e.clientX,e.clientY);if(!n){t||o(e=>e.map(e=>{var t;return{...e,fading:!0,alpha:null!==(t=e.alpha)&&void 0!==t?t:1}})),c.current={dragging:!1,anchor:null,activeIndex:null,addMode:t};return}let r=t?[...d.current]:[],l=r.length;r.push({c0:n.c,r0:n.r,c1:n.c,r1:n.r,alpha:1,fading:!1}),o(r),c.current={dragging:!0,anchor:n,activeIndex:l,addMode:t},e.preventDefault()},v=e=>{if(!c.current.dragging||null==c.current.anchor)return;let n=t.closest(".workstation-left-grid");n&&!n.classList.contains("ws-dragging")&&n.classList.add("ws-dragging");let r=w(e.clientX,e.clientY);if(!r)return;let l=c.current.activeIndex;if(null==l)return;let a=g(c.current.anchor,r);o(e=>{let t=[...e];t[l]&&(t[l]={...a,alpha:1,fading:!1});for(let e=t.length-1;e>=0;e--){if(e===l)continue;let n=t[e],r={c0:n.c0,r0:n.r0,c1:n.c1,r1:n.r1};m(r,a)&&(a=u(a,r),t[l]={...a,alpha:1,fading:!1},t.splice(e,1),e<l&&(c.current.activeIndex=c.current.activeIndex-1))}return t}),e.preventDefault()},j=()=>{if(!c.current.dragging)return;c.current.dragging=!1;let e=t.closest(".workstation-left-grid");e&&e.classList.remove("ws-dragging"),o(e=>f(e).map(e=>{var t;return{...e,fading:!0,alpha:null!==(t=e.alpha)&&void 0!==t?t:1}}))},y=e=>{let n=t.closest(".workstation-left-grid");n&&!n.contains(e.target)&&o(e=>e.map(e=>{var t;return{...e,fading:!0,alpha:null!==(t=e.alpha)&&void 0!==t?t:1}}))},b=t.closest(".workstation-left-grid");return t.addEventListener("mousedown",x),window.addEventListener("mousemove",v),window.addEventListener("mouseup",j),document.addEventListener("mousedown",y),b&&b.classList.remove("ws-dragging"),()=>{p.disconnect(),window.removeEventListener("orientationchange",h),t.removeEventListener("mousedown",x),window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",j),document.removeEventListener("mousedown",y)}},[s]),(0,l.useEffect)(()=>{let e;let t=performance.now(),n=r=>{let l=Math.max(0,(r-t)/1e3);t=r;let a=d.current;if(a.length>0){let e=!1,t=a.map(t=>{if(!t.fading)return t;let n=Math.max(0,t.alpha-.3*l);return n!==t.alpha&&(e=!0),{...t,alpha:n}}).filter(e=>e.alpha>0);e&&o(t)}e=requestAnimationFrame(n)};return e=requestAnimationFrame(n),()=>cancelAnimationFrame(e)},[]);let p=s.map((e,n)=>{let l=e.c0*t.w,a=e.r0*t.h,i=(e.c1-e.c0+1)*t.w,s=(e.r1-e.r0+1)*t.h;return(0,r.jsx)("div",{className:"ws-selection-box",style:{left:l,top:a,width:i,height:s,opacity:e.alpha}},n)});return(0,r.jsx)("div",{className:"ws-bg-grid-wrap","aria-hidden":"true",children:(0,r.jsx)("div",{className:"ws-grid-3d",children:(0,r.jsx)("div",{ref:e,className:"ws-grid",children:(0,r.jsx)("div",{className:"ws-selection-layer",children:p})})})})}function d(){let[e,t]=(0,l.useState)(null),[n,d]=(0,l.useState)(null),[u,m]=(0,l.useState)(!1),[p,h]=(0,l.useState)(!1),w=()=>{let e=document.querySelector(".min-h-screen");e&&m(window.scrollY>=e.clientHeight-1)},g=async()=>{let e=-1!==window.navigator.userAgent.indexOf("Windows");if(d(e?"windows":"mac"),!e)try{let e=new Promise((e,t)=>{setTimeout(()=>t(Error("CPU detection timeout")),2e3)}),n=new Promise(e=>{let t=document.createElement("canvas").getContext("webgl2"),n=null==t?void 0:t.getExtension("WEBGL_debug_renderer_info"),r=t&&n?t.getParameter(n.UNMASKED_RENDERER_WEBGL):"";setTimeout(()=>{e(r.includes("Apple")?"Apple Silicon":"Intel")},100)}),r=await Promise.race([n,e]);t(r)}catch(e){console.log("CPU detection failed:",e),t("Apple Silicon")}};return(0,l.useEffect)(()=>(g(),w(),window.addEventListener("scroll",w),()=>{window.removeEventListener("scroll",w)}),[]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"fixed top-0 left-0 right-0 bg-white z-50 transition-all duration-300 ".concat(u?"translate-y-0":"-translate-y-full"),children:(0,r.jsx)("div",{className:"container mx-auto px-4 h-16 flex items-center justify-end",children:(0,r.jsxs)("button",{className:"pl-3 pr-4 py-2 rounded-none gap-1 bg-transparent text-neutral-600 border border-neutral-300 hover:bg-neutral-100 duration-0 text-sm inline-flex items-center",onClick:()=>{"windows"===n?window.location.href=o.windows:window.location.href="Apple Silicon"===e?o.appleSilicon:o.intel},children:["mac"===n&&(0,r.jsx)(a.g,{icon:i.qKs}),(0,r.jsx)("span",{className:"font-medium tracking-tight ml-1",children:"windows"===n?"Download for Windows":"Free Download"})]})})}),(0,r.jsx)("div",{className:"min-h-screen bg-white shadow-sm #dark:invert #dark:contrast-150",children:(0,r.jsxs)("div",{className:"relative flex w-full h-screen flex-col items-center justify-center p-8 lg:p-12 workstation-left-grid",children:[(0,r.jsx)(c,{}),(0,r.jsx)("span",{className:"ws-center-glow","aria-hidden":"true"}),(0,r.jsx)("div",{className:"flex-1 flex flex-col justify-center relative z-10 pointer-events-none",children:(0,r.jsxs)("div",{className:"ws-content-block tracking-tighter max-w-md flex flex-col items-center text-center transition-opacity duration-300 text-neutral-600 ".concat(n?"opacity-100":"opacity-0"," pointer-events-auto"),children:[(0,r.jsx)(s.P.button,{type:"button","aria-label":"Download Interpreter Workstation",title:"Download Interpreter Workstation",initial:{y:8,opacity:0},animate:{y:0,opacity:1},transition:{duration:.4,ease:"easeOut",delay:.05},whileTap:{y:-1},onClick:()=>{"windows"===n?window.location.href=o.windows:window.location.href="Apple Silicon"===e?o.appleSilicon:o.intel},className:"mb-4 cursor-pointer p-0 bg-transparent border-0 focus:outline-none",children:(0,r.jsx)("img",{src:"/icon.png",alt:"Interpreter Workstation icon",className:"w-32 h-32"})}),(0,r.jsxs)("h1",{className:"mb-5 text-4xl",children:[(0,r.jsx)("span",{className:"font-light",children:"Interpreter"})," ",(0,r.jsx)("span",{className:"font-medium",children:"Workstation"})]}),(0,r.jsx)("div",{className:"space-y-2 w-full flex flex-col items-center",children:(0,r.jsxs)("div",{className:"space-y-2 mt-2 flex flex-col items-center",children:[(0,r.jsxs)("button",{className:"pl-4 pr-5 py-3 rounded-none gap-1 bg-transparent border border-neutral-300 text-neutral-600 hover:bg-neutral-100 duration-0 text-sm inline-flex items-center",onClick:()=>{"windows"===n?window.location.href=o.windows:window.location.href="Apple Silicon"===e?o.appleSilicon:o.intel},children:["mac"===n&&(0,r.jsx)(a.g,{icon:i.qKs}),(0,r.jsx)("span",{className:"font-medium tracking-tight ml-1",children:"windows"===n?"Download for Windows":"Free Download"})]}),(0,r.jsx)(s.P.div,{className:"text-center text-xs text-neutral-500 mt-2",initial:!1,animate:{opacity:1},children:p?(0,r.jsxs)(s.P.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},children:[(0,r.jsx)("button",{onClick:()=>h(!1),className:"hover:underline mr-1",children:"<"}),"Works on"," ",(0,r.jsx)("a",{href:o.appleSilicon,className:"hover:underline",children:"Apple Silicon"})," ","or"," ",(0,r.jsx)("a",{href:o.intel,className:"hover:underline",children:"Intel Mac"})]}):(0,r.jsxs)("p",{children:["Works on"," ",(0,r.jsx)("a",{href:o.windows,className:"hover:underline",children:"Windows"})," ","and"," ",(0,r.jsx)("button",{onClick:()=>h(!0),className:"hover:underline underline-offset-2 cursor-pointer",children:"Mac"})]})})]})})]})})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[802,205,441,517,358],()=>t(6635)),_N_E=e.O()}]);